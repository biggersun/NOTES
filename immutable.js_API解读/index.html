<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>immutable.js</title>
</head>
<body>
	
</body>
<script src='./immutable.min.js'></script>
<script>
//has()  include();
const list1 = Immutable.List([1,2,3]);
const list2 = list1.push(4);
const list3 = list1.insert(3,4);
// console.log(list2.includes(2));//true
console.log(list2.has(4));//fasle

const map1 = Immutable.Map({ a: 1, b: 2});
const map2 = Immutable.Map({c:3});
const map3 = map1.merge(map2)
// console.log(map3.includes(3));
// console.log(map3.has('c'));

//List =====
// const list1 = Immutable.List.of(1,2,3);
// const list2 = Immutable.List([4,5]);
// list1.insert(1,4);
// list1.push(4);
// console.log(list1); //不管是insert() 还是push()  都不能改变 list1本身,
// console.log(list1.insert(5));  //
// console.log(list1.push(4)); 

//fromJS() 和 Map() List()
	// const a1 = Immutable.fromJS({ a: { c: 1 }, b: 2 });
	// console.log(a1);
	// const a2 = Immutable.Map({ a: { c: 1 }, b: 2 });
	// console.log(a2.getIn('a').c);
	// const a3 = Immutable.fromJS([ { a : 1 }, { b : 1 }, { c : 3 } ]);
	// console.log(a3);
	// let a2 = a1.setIn(['a', 'c'],3);
	// console.log(a2.getIn(['a', 'c']));
	// console.log(a1.getIn(['a', 'c']));

// map()
// console.log(Immutable);
// 	let a1 = Immutable.Map({ a: Immutable.Map({ c: 1 }), b: 2 });
// 	let a2 = a1.set('b',3);
// 	console.log(a2.get('b'));
// 	console.log(a1.getIn(['a', 'c']));


// //常用API
// const obj1 = { a : 1 , b : 3 };
// const obj = { b : 2 }
// // 将JS对象转换为Immutable对象
// const im = Immutable.fromJS(obj1)
// // 将Immutable对象转换为JS对象
// const obj = im.toJS();
// // 将Immutable对象转换为JSON对象
// const json = im.toJSON();
// // 判断对象中是否有值
// const bool = im.has(name);
// // 判断两个对象是否相等
// const bool = im1.equals(im2);
// // 赋值/深度赋值，SetIn方法将依次查找到最后一层的key并执行赋值
// // 要注意这两个方法并不会自动将obj转换为immutable对象存储！
// const newIm = im.set(key, value);
// const newIm = im.setIn([key1, key2, ......], value);
// // 取值/深度取值
// // 深度取值第二个参t arr1 = [ 3, 7, 10];
// const L1 = Immutable.List(arr1);
// let val = L1.find(function (x) {
// 	console.log(x);
// 	return x > 11;
// },1,1);数是一个可选的默认值，这是一种optional的实现，如果找不到值，将会返回默认值
// const value = im.get(key);
// const value = im.getIn([key1, key2, ......], defaultValue);
// // 归并，obj可以是Immutable对象也可以是JS对象
// const newIm = im.merge(obj);
// const newIm = im.update("a",(x) => x + 1);

// find() of List
// find()  第一个参数是一个reducer 返回符合条件的结果 依次执行直到有一个符合就不再往下运行了 ,第三个参数为默认返回值
// filter() 用法和find相似,返回符合条件的 List 结果
// cons
// let val = L1.filter(function (x) {
// 	console.log(x);
// 	return x > 4;
// },4);
// console.log(val);

</script>
</html>